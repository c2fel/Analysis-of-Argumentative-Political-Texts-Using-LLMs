<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Abstimmungstage & Vorlagen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/sticky-footer-navbar/">
    <script src="http://127.0.0.1:5000/static/color-modes.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <meta name="theme-color" content="#712cf9">
    <link href="http://127.0.0.1:5000/static/styles.css" rel="stylesheet">

    <style>
        .bd-placeholder-img{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg{font-size:3.5rem}}.b-example-divider{width:100%;height:3rem;background-color:#0000001a;border:solid rgba(0,0,0,.15);border-width:1px 0;box-shadow:inset 0 .5em 1.5em #0000001a,inset 0 .125em .5em #00000026}.b-example-vr{flex-shrink:0;width:1.5rem;height:100vh}.bi{vertical-align:-.125em;fill:currentColor}.nav-scroller{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller .nav{display:flex;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.btn-bd-primary{--bd-violet-bg: #712cf9;--bd-violet-rgb: 112.520718, 44.062154, 249.437846;--bs-btn-font-weight: 600;--bs-btn-color: var(--bs-white);--bs-btn-bg: var(--bd-violet-bg);--bs-btn-border-color: var(--bd-violet-bg);--bs-btn-hover-color: var(--bs-white);--bs-btn-hover-bg: #6528e0;--bs-btn-hover-border-color: #6528e0;--bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);--bs-btn-active-color: var(--bs-btn-hover-color);--bs-btn-active-bg: #5a23c8;--bs-btn-active-border-color: #5a23c8}.bd-mode-toggle{z-index:1500}.bd-mode-toggle .bi{width:1em;height:1em}.bd-mode-toggle .dropdown-menu .active .bi{display:block!important}
    </style>
</head>
<body class="d-flex flex-column h-100">
{% include "header.html" %}
<main class="flex-shrink-0">
    <div class="container">
        <h1 class="mt-5">{{ erlaeuterung.vorlagenTitel }}</h1>
        <p>Popular vote of {{ vote_date }} contains {{ erlaeuterung.kapitel | length }} chapters.</p>
        <ul class="nav nav-pills nav-fill mb-3" id="pills-tab" role="tablist">
            <!-- TODO auch hier kann class "active" genutzt werden um UI zu optmimieren -->
            {% for chapter in erlaeuterung.kapitel %}
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab{{ loop.index }}-tab" data-bs-toggle="pill" data-bs-target="#tab{{ loop.index }}" type="button" role="tab" aria-controls="tab{{ loop.index }}" aria-selected="false">{{ chapter.text }}</button>
            </li>
            {% endfor %}
            <li class="nav-item">
                <button class="nav-link" id="tab{{ (erlaeuterung.kapitel | length) + 1 }}-tab" data-bs-toggle="pill" data-bs-target="#tab{{ (erlaeuterung.kapitel | length) + 1 }}" type="button" role="tab" aria-controls="tab{{ (erlaeuterung.kapitel | length) + 1 }}" aria-selected="false">News</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="tab{{ (erlaeuterung.kapitel | length) + 2 }}-tab" data-bs-toggle="pill" data-bs-target="#tab{{ (erlaeuterung.kapitel | length) + 2 }}" type="button" role="tab" aria-controls="tab{{ (erlaeuterung.kapitel | length) + 2 }}" aria-selected="false">Results</button>
            </li>
        </ul>

        <div class="tab-content" id="pills-tabContent">
            <!-- TODO put class "active" depending on view -->
            {% for chapter in erlaeuterung.kapitel %}
            <div class="tab-pane fade show" id="tab{{ loop.index }}" role="tabpanel" aria-labelledby="tab{{ loop.index }}-tab">
                <div class="container" style="min-height: 50vh;">
                    <div class="row" style="min-height: 50vh;">
                        <div class="col-8 bg-light" style="min-height: 50vh;">
                            <h3>Contents</h3>
                            {% for k in chapter.komponenten %}
  {# Titel: #}
  {% if k.typ == 'title' and k.title %}
    <h2 class="mt-4">{{ k.title.text }}</h2>
  {% endif %}

  {# Text: #}
  {% if k.typ == 'text' and k.text %}
    <p>{{ k.text.text | safe }}</p>
  {% endif %}

  {# Parole: #}
  {% if k.typ == 'parole' and k.parole %}
    <blockquote class="blockquote">{{ k.parole.text }}</blockquote>
  {% endif %}

  {# Link: #}
  {% if k.typ == 'link' and k.link %}
    <a href="{{ k.link.url }}" target="_blank" rel="noopener">
      {{ k.link.name or k.link.url }}
    </a>
  {% endif %}

  {# Youtube: #}
  {% if k.typ == 'youtube' and k.youtube %}
    <div class="ratio ratio-16x9 my-2">
      <iframe src="https://www.youtube.com/embed/{{ k.youtube.youtubeId }}" title="YouTube-Video" frameborder="0" allowfullscreen></iframe>
    </div>
  {% endif %}

  {# Bild: #}
  {% if k.typ == 'image' and k.image %}
    <div class="my-2">
      <img src="{{ 'https://app-static.voteinfo-app.ch/v5/' ~ vote_id ~ '/' ~ k.image.url }}" alt="{{ k.image.altText or '' }}" class="img-fluid"/>
      {% if k.image.caption %}
        <div class="text-muted small">{{ k.image.caption }}</div>
      {% endif %}
    </div>
  {% endif %}

  {# Abstimmungs-Resultate (vote): #}
  {% if k.typ == 'vote' and k.vote %}
    <div class="my-2">
      <h5>{{ k.vote.titel }}</h5>
      <ul>
        {% for balken in k.vote.balken %}
          <li>{{ balken.label }}: {{ balken.value }}</li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  {# PDF: #}
  {% if k.typ == 'pdf' and k.pdf %}
  <div class="my-2">
    <iframe src="{{ 'https://app-static.voteinfo-app.ch/v5/' ~ vote_id ~ '/' ~ k.pdf.url }}#page=1"
            width="100%" height="500px"
            title="PDF-Vorschau">
    </iframe>
    {% if k.pdf.name %}
      <div class="small text-muted">Dateiname: {{ k.pdf.name }}</div>
    {% endif %}
    <a href="{{ 'https://app-static.voteinfo-app.ch/v5/' ~ vote_id ~ '/' ~ k.pdf.url }}" target="_blank" rel="noopener" class="btn btn-outline-secondary btn-sm mt-2">
      PDF im neuen Tab Ã¶ffnen
    </a>
  </div>
{% endif %}
{% endfor %}

                        </div>
                        <div class="col-4 bg-secondary text-white" style="min-height: 50vh;">
                            <h3>Annotations / Chat</h3>

                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            <div class="tab-pane fade" id="tab{{ (erlaeuterung.kapitel | length) + 1 }}" role="tabpanel" aria-labelledby="tab{{ (erlaeuterung.kapitel | length) + 1 }}-tab">
                <h4>News</h4>
                <p>Put relevant news articles from differently balanced outlets here, similarly to <u>ground.news</u> concept.</p>
            </div>
            <div class="tab-pane fade" id="tab{{ (erlaeuterung.kapitel | length) + 2 }}" role="tabpanel" aria-labelledby="tab{{ (erlaeuterung.kapitel | length) + 2 }}-tab">
                <h4>Results</h4>
                <p>Put final results here.</p>
            </div>
        </div>

    <br /><br />
</main>
{% include "footer.html" %}
</body>
</html>
<footer class="footer mt-auto py-3 bg-body-tertiary" style="height: 250px;">
    <div class="container d-flex justify-content-between align-items-center">
        <img src="/static/unisg.jpeg" alt="Logo" style="height:100px;">
        <span class="text-body-secondary">Master Thesis, Christoph Zweifel</span>
    </div>
</footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    // Get URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const currentLanguage = urlParams.get('language') || 'de'; // Default to 'de'
    const currentModel = urlParams.get('model') || 'grok-4'; // Default to 'grok-4'

    // Handle model dropdown
    document.querySelectorAll('#model-menu .dropdown-item').forEach(item => {
        const model = item.getAttribute('href').split('=')[1];
        if (model === currentModel) {
            item.classList.add('selected'); // Use Bootstrap's 'selected' class
        }
    });

    // Handle language dropdown
    document.querySelectorAll('#language-menu .dropdown-item').forEach(item => {
        const language = item.getAttribute('href').split('=')[1];
        if (language === currentLanguage) {
            item.classList.add('selected'); // Use Bootstrap's 'selected' class
        }
    });
</script>
<script>
        // Funktion zur Formatierung des Datums
        function formatAbstimmungstag(dateString) {
            try {
                const date = new Date(dateString);
                if (isNaN(date)) {
                    return "Ungültiges Datum";
                }
                const day = date.getDate(); // Tag ohne führende Null
                const month = date.toLocaleDateString("de-DE", { month: "long" }); // Monat als Wort
                const year = date.getFullYear();


                //return `${day}. ${month} ${year}`;
                return date.toLocaleDateString("de-DE", {
                    day: "2-digit",
                    month: "long",
                    year: "numeric"
                });



            } catch (error) {
                return "Fehler beim Formatieren des Datums";
            }
        }

        // Beim Laden der Seite alle <span id="formatted-date"> verarbeiten
        document.addEventListener("DOMContentLoaded", () => {
            const dateElements = document.querySelectorAll("span#formatted-date.formatted-date");
            dateElements.forEach(element => {
                const dateString = element.textContent; // Lies das Datum (z. B. {{ abstimmungstag }})
                const formattedDate = formatAbstimmungstag(dateString);
                element.textContent = formattedDate; // Ersetze durch formatiertes Datum
            });
        });
    </script>
<script>
function sendMarkedText() {
  const selection = window.getSelection();
  const selectedText = selection ? selection.toString() : "";
  if (!selectedText) {
    alert("Kein Text markiert!");
    return;
  }

  // Sende den Text per POST an den Server (ohne Encoding, da JSON)
  fetch('/llm', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ text: selectedText })
  })
  .then(response => response.json())
  .then(data => {
    // Blende den LLM-Output im Div ein
    document.getElementById('outputs').innerHTML = data.output;
  })
  .catch(error => {
    console.error('Fehler:', error);
    document.getElementById('outputs').innerHTML = 'Fehler beim Abrufen des LLM-Outputs.';
  });
}
</script>

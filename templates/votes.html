<!DOCTYPE html>
<html lang="de">
<head>
    <title>Abstimmungstage & Vorlagen</title>
    {% include "head.html" %}
</head>
<body class="d-flex flex-column h-100">
{% include "header.html" %}
<main class="flex-shrink-0">
    <div class="container">
    <h1 class="mt-5">All Popular Votes</h1>
        <p>This list currently is incomplete as the texts and media of popular votes in Switzerland are only easily accessible for votes after 2019.</p>
    <div class="accordion" id="accordionExample">
        {% for abstimmungstag, votes in abstimmungstage.items() %}
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading{{ loop.index }}">
                <button class="accordion-button collapsed d-flex justify-content-between align-items-center {% if not loop.first %}collapsed{% endif %}" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ loop.index }}" aria-expanded="{{ 'true' if loop.first else 'false' }}" aria-controls="collapse{{ loop.index }}" style="text-align:left;">
                    <span class="text-start flex-grow-1" style="max-width:33%;"><span id="formatted-date" class="formatted-date">{{ abstimmungstag }}</span></span>
                    <span class="text-center flex-grow-1" style="max-width:33%;">{{ votes|length }} popular votes</span>
                    <span class="flex-grow-1 d-flex justify-content-end" style="max-width:33%;"></span>
                </button>
            </h2>
            <div id="collapse{{ loop.index }}" class="accordion-collapse collapse {% if loop.first %}show{% endif %}"
                 aria-labelledby="heading{{ loop.index }}" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <table class="table table-striped table-sm">
                        <thead>
                            <tr>
                                <!--<th>VoteId</th>-->
                                <th style="width:30%;">Title</th>
                                <th>Metadata</th>
                                <th>LLM Classification</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for vote in votes %}
                            <tr>
                                <td>{% if vote.status == 2 %}<a href="/votes/{{ vote.voteId }}">{{ vote.voteTitle[language] }}</a>{% else %}{{ vote.voteTitle[language] }}{% endif %}</td>
                                <td><button type="button" class="btn btn-secondary btn-sm">{{ vote.voteType }}</button> <button type="button" class="btn {% if vote.status == 2 %}btn-success btn-sm">Ready{% elif vote.status == 1 %}btn-danger btn-sm">Not ready{% else %}btn-danger btn-sm">Missing data{% endif %}</button></td>
                                <td><button type="button" class="btn btn-info btn-sm">{{ vote.voteTopic }}</button> <button type="button" class="btn btn-warning btn-sm">{{ vote.voteComplexity }}</button></td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    </div>
    <br /><br /><br />
</main>
{% include "footer.html" %}
</body>
</html>